{% extends 'base.html' %}

{% block extrahead %}


<meta charset="utf-8">

<style type="text/css">
    #salida_activo li {
     display:inline;
     margin-left: -10px;
     padding-left:3px;
     padding-right:60px;
    }
</style> 
{% endblock %}

{% block title %}
    <h2>Ordenes de Pedidos</h2>
{% endblock %}

{% block content %}
<!-- <div class="loader"></div> -->
<div class="container jumbotron" style="background-color:whitesmoke;width: 80%; margin:auto; padding-top: 15px; margin-top: 10px; margin-bottom: 25px;">
<h2 class="display-5">Edición de Ordenes de Trabajo Internas</h2>
<br>
{% if observa %}
<hr/>
<label for="observa1n">Observaciones de Rechazo Gerencia: </label>
<textarea class="form-control" style="background-color:mistyrose" name="observa1n" id="observa1n" cols="30" rows="3" readonly>{{observa}}</textarea>
<hr/>
{% endif %}
<form method="POST" enctype="multipart/form-data">
    {% csrf_token %}
    <div class="form-group">
        <!-- {{form.usuario_solicita}} -->
    </div>
    <div class="form-row">
        <div class="form-group col-md-4">
            <label> {{form.ubica.label}}</label><br>
            {{form.ubica}}
            
        </div>
        <div class="form-group col-md-4">
            <label>{{ form.departamento.label }}</label>
            {{ form.departamento }}
        </div>

        <div class="form-group col-md-4">
            <label>{{ form.tipo.label }}</label>
            {{ form.tipo }}
        </div>

        
        <div class="form-group col-md-12" id="vueapp">
            <label>Sector</label>
            {{ form.area }}
            <input 
                  type="text"
                  name="nsector"
                  class="form-control"
                  placeholder="{{sectordj}}"
                  v-model="kword"
            >
        
           <li
           v-for="sector in lista_sectores"
           :key="sector.id"
           class="list-group-item d-flex p-1 border-1"
           @click="AgregarSector(sector.area_nombre)">${ sector.area_nombre }$
        </li>
    </div>

    

    </div>
  
    <div class="form-row">
    
    <div class="form-group col-md-12">
        <label>{{form.descripcion.label}}</label>
        {{form.descripcion}}
    </div>  

    <div class="form-group col-md-12">
        <label>{{form.justificacion.label}}</label>
        {{form.justificacion}}
    </div>
    <div class="form-group col-md-12">
        <label><strong>ZONA DE CARGA DE IMAGENES</strong></label>
        <p>Arrastre imágenes en el área a continuación para ampliar su solicitud</p>
        <div class="row">
        <div class="col-6">
        <label>Imágen #1</label>
        {{form2.img_1}}
        </div>

        <div class="col-6">
        <label>Imágen #2</label>
        {{form2.img_2}}
    </div>

</div>

    </div>
    <br>
    <br>
    
    <div class="row">
        <div class="col-md-12" style="margin-top: 10px;">
            <button type="submit" class="btn btn-lg btn-primary button" id="enviar" name="enviar">Actualizar</button>
        </div>
    </div>
</form>
</div>
{% endblock %}

{% block extrajs %}
<script>
 
   
    $(window).on("load", function() {
        $(".loader").fadeOut("slow");
    });

    $(document).ready(function() {    
        $('#enviar').on('click', function(){
            var incompletos = false
            $('.in').each(function(){
                if ($(this).val().trim() == ''){
                    incompletos = true
                }
            });
            if (incompletos == false){
                //Añadimos la imagen de carga en el contenedor
                $(".loader").show();
                $(window).on("load", function(){
                    $(".loader").fadeOut("slow");
                });
            }
        });              
    });    

</script>


{% load static %}

<script src="https://unpkg.com/vue@3"></script>
<script src="https://unpkg.com/axios/dist/axios.min.js"></script>
<script type="module" src="{% static 'vue/apps/trabajosInternos/addSector.js' %}"></script>

{% endblock %}

{% extends "base_laboratorio.html" %}

{% load static %}

{% block contenido %}

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
      

    <style type="text/css">

            #container-main{
                margin:40px auto;
                width:95%;
                min-width:320px;
                max-width:960px;
            }
            
            #container-main h1{
                font-size: 40px;
                text-shadow:4px 4px 5px rgb(39, 155, 55);
            }
            
            .accordion-container {
                width: 96.75%;
                margin: 0 0 20px;
                clear:both;
                margin-left: 25px;
            }
            
            .accordion-titulo {
                position: relative;
                display: block;
                padding: 20px;
                font-size: 18px;
                font-weight: 300;
                background: #2c3e50;
                color: #fff;
                text-decoration: none;
            }
            .accordion-titulo.open {
                background:rgb(39, 155, 55);
                color: #fff;
            }
            .accordion-titulo:hover {
                background: rgb(39, 155, 55);
            }
            
            .accordion-titulo span.toggle-icon:before {
                content:"+";
            }
            
            .accordion-titulo.open span.toggle-icon:before {
                content:"-";
            }
            
            .accordion-titulo span.toggle-icon {
                position: absolute;
                top: 17px;
                right: 20px;
                font-size: 20px;
                font-weight:bold;
            }
            
            .accordion-content {
                display: none;
                padding: 20px;
                overflow: auto;
            }
            
            .accordion-content p{
                margin:0;
            }
            
            
            @media (max-width: 767px) {
                .accordion-content {
                    padding: 10px 0;
                }
            }

            .barraSuperior{
                      
                      background-color: rgb(39, 155, 55);
                      height: 120px;
                      
            }
            
            

            .logo {

                    background: url(http://www.centralhidroelectrica.com/rotador/industrias/ecofroz.jpg);
                    background-size: 120px;
                    height: 120px;
                    width: 120px;
                    margin-left: 15px;
                    
                  
            }

            .fondo {

                      
                      /*background: url(https://alkemi.es/wp-content/uploads/2017/08/45720416_m.jpg);*/
                      /*background-color: rgb(168, 206, 146);*/
                      background-color: rgb(168, 206, 146);
                      background-size: cover;
                      height: auto;
      
            }

            /*.fondo:hover
            {
                filter: sepia(60%);
            }*/

            .label0 {

                    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
                    font-size: 30px;
                    text-align: center;
                    margin-top: 100px;
                    color: white;
                    margin-left: 10px;

                    }
           
            .label1 {

                      font-size: 17px;
                      margin-left: 200px;
                      margin-top: 40px;
                      color: black;
            }

            .label2 {

                    font-size: 17px;
                    margin-left: 200px;
                    margin-top: 40px;
                    color: black;
            }

            .tabla {
                      height: 20px;
                      width: 1351px;
                      margin-left: -22px;
                      margin-top: -20px;
                      background-color: transparent;
            }

            .tabla1 {
                      height: 10px;
                      width: 1330px;
                      margin-left: 36px;
                      margin-top: -20px;
                      background-color: transparent;
            }

            .celdas_ancho{
                height: 5px;
            }

            .celdas {
                
                background-color: rgb(194, 201, 103);
                width: 80px;
                text-align: center;
                color: black;
                vertical-align: top;
            }
            .celdas1 {
                
                background-color: rgb(194, 201, 103);
                width: 220px;
                text-align: center;
                color: black;
                vertical-align: top;
            }

            .celdas2 {
                
                background-color: rgb(194, 201, 103);
                width: 100px;
                text-align: center;
                color: black;
                vertical-align: top;
            }

            .celdas3 {
                
                background-color: rgb(194, 201, 103);
                width: 130px;
                text-align: center;
                color: black;
                vertical-align: top;
            }

            .celdas4 {
                
                background-color: rgb(194, 201, 103);
                width: 260px;
                text-align: center;
                color: black;
                vertical-align: top;
            }

            .celdas5 {
                
                background-color: rgb(194, 201, 103);
                width: 80px;
                text-align: center;
                color: black;
                vertical-align: top;
            }

            .celdas6 {
                
                background-color: rgb(194, 201, 103);
                width: 110px;
                text-align: center;
                color: black;
                vertical-align: top;
            }

            .celdas_boton {
                border-color: transparent;
                color: transparent;
                width: 20px;  
                text-align: center;
                vertical-align: middle;
            }

            .celdas_boton1 {
                border-color: transparent;
                color: transparent;
                width: 20px; 
                text-align: center;
                vertical-align: middle;
                display: table-cell;
            }

            .celdas_boton a{
                display: block;
                color: white;
                font-family: 'Lucida Sans', 'Lucida Sans Regular', 'Lucida Grande', 'Lucida Sans Unicode', Geneva, Verdana, sans-serif;
                
            }
            .celdas_boton1 a{
                display: block;
                color: white;
                font-family: 'Lucida Sans', 'Lucida Sans Regular', 'Lucida Grande', 'Lucida Sans Unicode', Geneva, Verdana, sans-serif;
                
            }

            .celdas_boton a:hover {
                
                background-color: #2c3e50;
                color: white;
                transition: all .3s;
                
            }

            .celdas_boton1 a:hover {
                
                background-color: rgb(45, 182, 182);
                transition: all .3s;
            }


            .fuente_letra {
                color: darkgreen;
            }

            .seleccion{

                width: 145px;
                background-color: white;
                border: 2px solid  rgb(39, 155, 55);
                height: 31px;
                font-size: 15px;


            }

            .seleccion1{

                width: 240px;
                height: 31px;
                background-color: white;
                border: 2px solid  rgb(39, 155, 55);
                font-size: 15px;


            }

            .seleccion2{

                width: 100px;
                background-color: white;
                border: 2px solid  rgb(39, 155, 55);
                height: 31px;
                font-size: 15px;


                }

            .seleccion3{

                width: 160px;
                background-color: white;
                border: 2px solid  rgb(39, 155, 55);
                height: 31px;
                font-size: 15px;
                }

                .seleccion4{

                width: 280px;
                background-color: white;
                border: 2px solid  rgb(39, 155, 55);
                height: 31px;
                font-size: 15px;
                }

                .seleccion5{

                width: 150px;
                background-color: white;
                border: 2px solid  rgb(39, 155, 55);
                height: 31px;
                font-size: 15px;
                }

                .seleccion6{

                width: 150px;
                background-color: white;
                border: 2px solid  rgb(39, 155, 55);
                height: 31px;
                font-size: 15px;
                }

                .boton_eliminar{

                
                background-color: rgb(182, 45, 45);
                border-radius: 4px;
                text-align: center;
                font-size: 13px;
                padding: 2px;

                }

                .boton_agregar{

                color: white;
                background-color: black;
                border-radius: 4px;
                border: 1px solid black;
                height: 30px;
                width: 70px;
                text-align: center;

                }

                .boton_agregar:hover {
                
                background-color: rgb(45, 182, 182);
                color: black;
                transition: all .3s;
                
            }

                .boton_agregar:hover{
                    border: 1px solid black;
                }

            .boton{

                
                background-color: rgb(45, 182, 182);
                border-radius: 4px;
                height: 20px;
                text-align: center;
   
            }

            .boton2{

                color: white;
                background-color: #2c3e50;
                border: 1px solid  black;
                border-radius: 6px;
                height: 15px;
                width: 200px;
                
                padding: 15px;
                text-align: center;
                margin-left: 1233px;
                font-size: 20px;
                padding-top: 5px;

                }

            .boton2:hover {
                
                background-color: rgb(45, 182, 182);
                color: white;
                transition: all .3s;
                
            }

            .titulo_tabla0{
                background-color: rgb(39, 155, 55);
                font-size: 20px;
                height: 30px;
            }

            .titulo_tabla{
                background-color: rgb(39, 155, 55);
                font-size: 15px;
                height: 30px;
            }

            .titulo_tabla1{
                background-color: rgb(39, 155, 55);
                font-size: 15px;
                width: 220px;
            }

            .titulo_tabla2{
                background-color: rgb(39, 155, 55);
                font-size: 15px;
                width: 100px;
            }

            .titulo_tabla3{
                background-color: rgb(39, 155, 55);
                font-size: 15px;
                width: 130px;
            }

            .titulo_tabla4{
                background-color: rgb(39, 155, 55);
                font-size: 15px;
                width: 260px;
            }

            .titulo_tabla5{
                background-color: rgb(39, 155, 55);
                font-size: 15px;
                width: 80px;
            }

            .titulo_tabla6{
                background-color: rgb(39, 155, 55);
                font-size: 15px;
                width: 110px;
            }

            .divisor {
                width: 94%;
                color: rgba(73, 170, 86, 0.863);
                border-radius: 5px;
                border-color: rgb(39, 155, 55);
                background-color: rgb(238, 241, 239);
                margin-left: 30px;
                
            }

            .leyenda {
                
                margin-left: 20px; 
                margin-top: 30px;
                font-size: 23px;
                color: black;
            }

            .titulo {
                
                background-color: #2c3e50;
                height: 50px;
                background-size: cover;
                position: relative;
                z-index: -1;
                margin-top: 25px;
            }

    </style>
    
<body class="fondo">
        <div><br>
            <form method="POST" name="f1">
                {% csrf_token %}

                <div class="titulo">
                    <label class="label0">Clientes</label>
                </div>
                
                
                <br>
                <br>
                <br>
                 
                
                <fieldset  class="divisor">
                    <legend class="leyenda">Tabla Análisis</legend> 

                    <br>
                    <br>
                    <br>

                                <table class="tabla1"> 
    
                                    <thead>
                                        <tr class="titulo_tabla0">
                                                
                                            <th colspan="9" class="titulo_tabla0" style="text-align:center; color: white;">PARÁMETROS MICROBIOLÓGICOS POR CLIENTE</th>
                                        
                                        </tr>
                                            
                                        <tr class="titulo_tabla">
                                                
                                            <th class="titulo_tabla" style="text-align:center; color: white;">CÓDIGO CLIENTE</th>
                                            <th class="titulo_tabla" style="text-align:center; color: white;">ANÁLISIS</th>
                                            <th class="titulo_tabla" style="text-align:center; color: white;">UNIDAD</th>
                                            <th class="titulo_tabla" style="text-align:center; color: white;">MÉTODO</th>
                                            <th class="titulo_tabla" style="text-align:center; color: white;">APROBACIÓN</th>
                                            <th class="titulo_tabla" style="text-align:center; color: white;">LÍMITE INFERIOR</th>
                                            <th class="titulo_tabla" style="text-align:center; color: white;">LÍMITE SUPERIOR</th>
                                            <th class="titulo_tabla2" style="text-align:center; color: white;">ACCIÓN</th>
                                        </tr>
    
                                            <tr>
                                                
                                                <th class="titulo_tabla" style="text-align:center; color: white; height: 30px;">
                                                    
                                                    <select class="seleccion" name="idCliente" id="codigo" onchange="activarBoton()" onclick="stopDefAction(event);">
                            
                                                        <option value="0" >------------</option>

                                                    {% for codigo in codigos %}
                                                        
                                                        <option value="{{ codigo.id_cliente}}" >{{ codigo.codigo_cliente }}</option>
                                                    
                                                    {% endfor %}
                        
                                                    </select>
                                                    
                                                </th>

                                                <th class="titulo_tabla1" style="text-align:center; color: white; height: 30px;">
                                                    
                                                    <select class="seleccion1" name="idAnalisisMicrobiologico" id="analisis" onchange="activarBoton()">

                                                        <option value="0" >------------------------</option>

                                                        {% for analisis_microbiologico in analisis_microbiologico %}
                            
                                                            <option value="{{ analisis_microbiologico.id_analisis_microbiologico }}">{{ analisis_microbiologico.tipo_analisis_microbiologico }}</option>
                                                        
                                                        {% endfor %}
                                                    </select>
                                                </th>

                                                <th class="titulo_tabla2" style="text-align:center; color: white; height: 30px;">
                                                    <select class="seleccion2" name="idUnidad" id="unidad" onchange="activarBoton()">

                                                        <option value="0" >-------</option>

                                                        {% for unidad in unidades %}
                            
                                                            <option value="{{ unidad.id_unidad }}">{{ unidad.tipo_unidad }}</option>
                                                        
                                                        {% endfor %}
                                                    </select>
                                                </th>

                                                <th class="titulo_tabla3" style="text-align:center; color: white; height: 30px;">
                                                    <select class="seleccion3" name="idMetodo" id="metodo" onchange="activarBoton()">

                                                        <option value="0" >-------------</option>

                                                        {% for metodo in metodos %}
                            
                                                            <option value="{{ metodo.id_metodo }}">{{ metodo.tipo_metodo }}</option>
                                                        
                                                        {% endfor %}
                                                     </select>
                                                </th>
                                                <th class="titulo_tabla4" style="text-align:center; color: white; height: 30px;">
                                                
                                                    <select class="seleccion4" name="idAprobacion" id="aprobacion" onchange="activarBoton()">

                                                        <option value="0" >------------------------</option>

                                                        {% for aprobacion in aprobaciones %}
                            
                                                            <option value="{{ aprobacion.id_aprobacion }}">{{ aprobacion.tipo_aprobacion }}</option>
                                                        
                                                        {% endfor %}
                                                     </select>
                                                </th>
                                                <th class="titulo_tabla5" style="text-align:center; color: white; height: 30px;">
                                                    <select class="seleccion5" name="idLimite_inferior" id="limite_inferior" onchange="activarBoton()">

                                                        <option value="0" >------------</option>

                                                        {% for limite_inferior in limite_inferior %}
                            
                                                            <option value="{{ limite_inferior.ID_LIMITE_INFERIOR }}">{{ limite_inferior.VALOR_LIMITE_INFERIOR }}</option>
                                                        
                                                        {% endfor %}
                                                     </select>
                                                </th>
                                                <th class="titulo_tabla6" style="text-align:center; color: white; height: 30px;">
                                                    <select class="seleccion6" name="idLimite_superior" id="limite_superior" onchange="activarBoton()">

                                                        <option value="0" >------------</option>

                                                        {% for limite_superior in limite_superior %}
                            
                                                            <option value="{{ limite_superior.ID_LIMITE_SUPERIOR }}">{{ limite_superior.VALOR_LIMITE_SUPERIOR }}</option>
                                                        
                                                        {% endfor %}
                                                     </select>
                                                </th>
                                                
                                                    <td class="celdas_boton1"><input class="boton_agregar" type="submit" value="Agregar" id="boton_de_agregar" disabled>
                                                          
                                            </tr>
                                    </thead>
    
                                    <tbody>
                            
                                        {% for parametros_microbiologicos_temporal in parametros_microbiologicos_temporal %}
            
                                        <tr class = "celdas_ancho">
    
                                            <td class="celdas"><b>{{ parametros_microbiologicos_temporal.CODIGO_CLIENTE }}</b></td>
                                            <td class="celdas1"><b>{{ parametros_microbiologicos_temporal.NOMBRE_PARAMETRO_MICROBIOLOGICO_TEMPORAL }}</b></td>
                                            <td class="celdas2"><b>{{ parametros_microbiologicos_temporal.UNIDAD_PARAMETRO_MICROBIOLOGICO_TEMPORAL }}</b></td>
                                            <td class="celdas3"><b>{{ parametros_microbiologicos_temporal.METODO_PARAMETRO_MICROBIOLOGICO_TEMPORAL }}</b></td>
                                            <td class="celdas4"><b>{{ parametros_microbiologicos_temporal.APROBACION_PARAMETRO_MICROBIOLOGICO_TEMPORAL }}</b></td>
                                            <td class="celdas5"><b>{{ parametros_microbiologicos_temporal.LIMITE_INFERIOR_PARAMETRO_MICROBIOLOGICO_TEMPORAL }}</b></td>
                                            <td class="celdas6"><b>{{ parametros_microbiologicos_temporal.LIMITE_SUPERIOR_PARAMETRO_MICROBIOLOGICO_TEMPORAL }}</b></td>
                                            <td class="celdas_boton"><a href="{% url 'borrar_parametros_temporal' parametros_microbiologicos_temporal.ID_PARAMETRO_MICROBIOLOGICO_TEMPORAL %}" style="text-decoration: none; display: block;" class="boton_eliminar"> Eliminar </a>
                                         
                                        
                                        </tr>
                                        
                                        {% empty %}
                                        <tr>
                                            <td style="color: black; font-size: 17px;" colspan="9"> No hay parámetros relacionados a un cliente. </td>
                                        </tr>
                                        {% endfor %}
                                    
                                    </tbody> 
                                    <tfoot>
                                        <tr>
                                            <th colspan="9" class="titulo_tabla0"></th>
                                        </tr>
                                    </tfoot> 
                                       
                                </table>
                        
                        <br>
                        <br>
                    
                    </fieldset>


                    <br>
                    <br>
                   
                    
 <a href="{% url 'conformar_clientes' %}" style="text-decoration: none; display: block;" class="boton2"> Agregar Parámetros</a>


                <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>

                <script>

                    //document.ready = document.getElementById("codigo").value = "{{codigo_select}}";

                    function activarBoton(){

                    //var seleccion = {seleccion};
 
                    var codigo = document.getElementById("codigo");
                    var analisis = document.getElementById("analisis");
                    var unidad = document.getElementById("unidad");
                    var metodo = document.getElementById("metodo");
                    var aprobacion = document.getElementById("aprobacion");
                    var limite_inferior = document.getElementById("limite_inferior");
                    var limite_superior = document.getElementById("limite_superior");
                    

                    var boton_de_agregar = document.getElementById("boton_de_agregar");
                    
                    if( codigo.selectedIndex && analisis.selectedIndex && unidad.selectedIndex && metodo.selectedIndex && aprobacion.selectedIndex && limite_inferior.selectedIndex && limite_superior.selectedIndex !=0)
                    boton_de_agregar.disabled = false;
                    else{
                    boton_de_agregar.disabled = true;
                    }
                    }

            
                </script>

                <script>
                
                $(document).ready(function () {
                        $.get('{% url "agregar_muestras" %}', function (seleccion) {
                            //document.ready = document.getElementById("codigo").value = seleccion.codigo_select;

                        });
                    });
                </script>

                <script>
                                
                    function stopDefAction(event){  

                        event.preventDefault();

                    }
                    </script>


        </body>

{% endblock contenido %}

{% extends 'base.html' %}
{% load bootstrap %}
{% load l10n %}
{% load widget_tweaks %}

{% block extrahead %}

<style>

<!DOCTYPE html>
<style>

<meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>

table {
  border-collapse: collapse;
  width: 100%;  
}

th, td {
  text-align: left;
  padding: 8px;
}

tr:nth-child(even){background-color: #f2f2f2}

th {
  background-color: #4CAF50;
  color: white;
}

ul.opciones {
  list-style-type:none;
}

input[type=text] {
  border: none;
  border-bottom: 1px solid #34bdeb ;
  background-color: none;
  outline: none;
  box-shadow: none !important;
  /* border: none; */
  border-bottom-color: 1px solid #34bdeb  ;
}

.button {
background-color: #4CAF50;
border: none;
color: white;
padding: 4px 20px; */
text-align: center;
text-decoration: none;
display: inline-block;
font-size: 16px;
margin: 4px 2px;
cursor: pointer;
border-radius: 4px;
}

.select-box {
    -webkit-appearance: button;
    -moz-appearance: button;
    -webkit-user-select: none;
    -moz-user-select: none;
    -webkit-padding-end: 20px;
    -moz-padding-end: 20px;
    -webkit-padding-start: 2px;
    -moz-padding-start: 2px;
    background-color: #faf9f7; /* Fallback color if gradients are not supported */
    background-image: url(../images/select-arrow.png), -webkit-linear-gradient(top, #E5E5E5, #F4F4F4); /* For Chrome and Safari */
    background-image: url(../images/select-arrow.png), -moz-linear-gradient(top, #E5E5E5, #F4F4F4); /* For old Firefox (3.6 to 15) */
    background-image: url(../images/select-arrow.png), -ms-linear-gradient(top, #E5E5E5, #F4F4F4); /* For pre-releases of Internet Explorer  10*/
    background-image: url(../images/select-arrow.png), -o-linear-gradient(top, #E5E5E5, #F4F4F4); /* For old Opera (11.1 to 12.0) */
    background-image: url(../images/select-arrow.png), linear-gradient(to bottom, #E5E5E5, #F4F4F4); /* Standard syntax; must be last */
    background-position: center right;
    background-repeat: no-repeat;
    border: 1px solid #AAA;
    border-radius: 2px;
    box-shadow: 0px 1px 3px rgba(0, 0, 0, 0.1);
    color:#262625;
    font-size: inherit;
    margin: 0;
    overflow: hidden;
    padding-top: 2px;
    padding-bottom: 2px;
    text-overflow: ellipsis;
    white-space: nowrap;
}

#tabla-reporte{
  font-family: "Trebuchet MS", Arial, Helvetica, sans-serif;
  border-collapse: collapse;
  width: 100%;
}

#tabla-reporte td, #tabla-reporte th {
  border: 1px solid #ddd;
  padding: 8px;
}

#tabla-reporte tr:hover {background-color: #ddd;}
#tabla-reporte tr:hover {background-color: #ddd;}

#tabla-reporte th {
  padding-top: 12px;
  padding-bottom: 12px;
  text-align: left;
  background-color: #4CAF50;
  color: white;
}



</style>


{% endblock %}


{% block content %}

<div class="container-fluid">
  <div class="form-row" style="margin-top: 15px;">
    
      <div class="row">
        <div class="col">
          <h3>Movimiento/Recepción de Activos Bodega.</h3>
          <h6>Busque y seleccione el activo a Mover/Recibir</h6>
          <p>
        </div>
    
    <form method="GET" id="form" > 
      <div class="row">
        <div class="col-sm">
          <ul class="opciones">
            <li><input type="radio" id="xcodigo" name="seleccion" placeholder="Ingrese el código">
              <label for="xcodigo">Por <u>Código</u>&nbsp;</label>{{ form2.activo_codigo }}<button class="button" type="submit" id="busca_activos" name="busca_activos">Buscar</button>
            </li> 
            <!-- <li><input type="radio" id="xtipo" name="seleccion">
              <label for="xtipo">Por <u>Tipo</u>&nbsp;</label>{% render_field form2.activo_tipo class="select-box" onChange="form.submit();" %}
            </li> -->
        
    </form> 
      <form method="GET" id="form2" >
        <li><input type="radio" id="xubicacion" name="seleccion2">
        <!-- <label for="xmarca">Por <u>Marca</u>&nbsp;</label>{{ form4.desc_activo_marca }}<button class="button" type="submit" id="busca_marca" name="busca_marca">Buscar</button></li> -->
        <label for="xubicacion">Por <u>Ubicación</u>&nbsp;</label>{{ ubicacionbod.ubicacion }}</li>
     
      </form> 

      <li><a class="btn btn-sm btn-info" href="{% url 'activos:busqueda_movimientos_bodega' %}" title="Reset">Reset</a></li>

    </ul>
    </div>
  </div> 
    </div>
  </div>
</div>
  
<div class="container-fluid">
  <h6>Número de registros encontrados:&nbsp;{{var}}</h6>
<table id="tabla-reporte">  
  <thead>
    <tr>
        <th scope="col"><strong>No</strong></th>
        <th scope="col"><strong>Codigo</strong></th>
        <!-- <th scope="col"><strong>Parte de</strong></th> -->
        <th scope="col"><strong>Ubicación</strong></th>
        <!-- <th scope="col"><strong>Departamento</strong></th> -->
        <th scope="col"><strong>Sector</strong></th>
        <th scope="col"><strong>Descripción</strong></th>
        <th scope="col"><strong>Tipo</strong></th>
        <th scope="col"><strong>Marca</strong></th>
        <th scope="col"><strong>Modelo</strong></th>
        <th scope="col"><strong>Grabado</strong></th>
        <th scope="col"><strong>Opciones</strong></th>
    </tr>
  </thead>
<tbody>
  {% for activo in form  %} 
  
    <tr>
      <!-- {% if perms.activos.change_desc_activo %}data-href="{% url 'activos:editar_activos'  activo.desc_activo_codigo.id %}" style="cursor: pointer;"{% endif %}>   -->
      <td>{{ forloop.counter0|add:form.start_index }}</td>
      <td>{{ activo.desc_activo_codigo.activo_codigo }}</td>
      <!-- <td>{{ activo.desc_activo_codigo.cod_activo_padre | default:"--" }}</td> -->
      <td>{{ activo.desc_activo_codigo.activo_ubica}}</td>
      <!-- <td>{{ activo.desc_activo_codigo.activo_depar | default:"--" }}</td> -->
      <td>{{ activo.desc_activo_codigo.activo_area | default:"--" }}</td>
      <td>{{ activo.desc_activo_codigo.activo_descripcion| default:"--" }}</td>
      <td>{{ activo.desc_activo_codigo.activo_tipo | default:"--" }}</td>
      <td>{{ activo.desc_activo_marca | default:"--" }}</td>
      <td>{{ activo.desc_activo_modelo | default:"--" }}</td>
      <td>{{ activo.desc_activo_codigo.grabado | default:"--" }}</td>
      <td style="align-content: center;">
        {% if activo.desc_activo_codigo.activo_ubica.id == 9 or activo.desc_activo_codigo.activo_ubica.id == 1 or activo.desc_activo_codigo.activo_ubica.id == 6 or activo.desc_activo_codigo.activo_ubica.id == 7 or activo.desc_activo_codigo.activo_ubica.id == 8 %}
        <a class="btn btn-success glyphicon glyphicon-check" title="Recepción de activos en Bodega" href="{% url 'activos:recibe_activo_bodega' activo.desc_activo_codigo.activo_codigo %}"></a>
        {% endif %}
        <a class="btn btn-warning glyphicon glyphicon-circle-arrow-right" title="Registrar Movimiento del Activo" href="{% url 'activos:movimiento_desde_bodega' activo.desc_activo_codigo.activo_codigo %}"></a>
        <a class="btn btn-info glyphicon glyphicon-tag" title="Confirmar Activo Grabado" href="{% url 'activos:cambio_estado_grabado_bodega' activo.desc_activo_codigo.activo_codigo %}"></a>
    
        <a class="btn btn-outline-primary glyphicon glyphicon-print" href="{% url 'ordenpedido:crea_pdf' activo.desc_activo_codigo.activo_codigo %}" target="_blank" title="Imprimir Código"></a>
        <!-- <a class="btn btn-warning glyphicon glyphicon-circle-arrow-right" title="Iniciar proceso para salida de activos" href="{% url 'activos:registrosalidaind' activo.desc_activo_codigo.activo_codigo %}"></a> -->
        
        
        <!-- <a href="{% url 'activos:registrosalidaind' activo.desc_activo_codigo.activo_codigo %}" class="btn btn-success">Solicitar </a> -->
      </td>
    </tr>
  </div>
{% endfor %}

</tbody>

</table>


<div class="pagination">
  <span class="step-links">
      {% if form.has_previous %}
          <a href="?buscar={{ query }}&activo_tipo={{ tipo }}&activo_ubica={{ ubicacion }}&activo_grupo={{ grupo }}&activo_depar={{ departamento }}&activo_area={{ area }}&page=1">&laquo; inicio</a>
          <a href="?buscar={{ query }}&activo_tipo={{ tipo }}&activo_ubica={{ ubicacion }}&activo_grupo={{ grupo }}&activo_depar={{ departamento }}&activo_area={{ area }}&page={{ form.previous_page_number }}">previo</a>
      {% endif %}

      <span class="current">
          Page {{ form.number }} of {{ form.paginator.num_pages }}.
      </span>

      {% if form.has_next %}
          <a href="?buscar={{ query }}&activo_tipo={{ tipo }}&activo_ubica={{ ubicacion }}&activo_grupo={{ grupo }}&activo_depar={{ departamento }}&activo_area={{ area }}&page={{ form.next_page_number }}">próximo</a>
          <a href="?buscar={{ query }}&activo_tipo={{ tipo }}&activo_ubica={{ ubicacion }}&activo_grupo={{ grupo }}&activo_depar={{ departamento }}&activo_area={{ area }}&page={{ form.paginator.num_pages }}">último &raquo;</a>
      {% endif %}
      
  </span>
</div>


{% endblock content %}

{% block extrajs %}

<script>

$(document).ready(function(){
  $("#id_activo_codigo").hide().val("");
  $("#busca_activos").hide().val("");
  $("#busca_marca").hide().val("");
  $("#id_desc_activo_marca").hide().val("");
  $("#ubicacion").hide().val("");
  $("#id_activo_grupo").hide().val("");
  $("#id_activo_tipo").hide().val("");
  $("#id_activo_area").hide().val("");
  $("#id_activo_depar").hide().val("");
  $("#id_pestanias_seguros").hide().val("");
  $("#id_poliza_seguros").hide().val("");
})  
  
$("#xcodigo").on('click', xCodigo)
$("#xubicacion").on('click', xUbicacion)
$("#xtipo").on('click', xTipo)

//Funciones que ocultan listas de seleccion y campos
function xCodigo() {
$("#id_activo_codigo").show();
$("#busca_activos").show();
$("#id_activo_tipo").hide().val("");
$("#id_activo_grupo").hide().val("");
$("#id_activo_ubica").hide().val(""); 
$("#id_activo_depar").hide().val("");
$("#id_pestanias_seguros").hide().val("");
$("#id_activo_area").hide().val("");
$("#id_poliza_seguros").hide().val("");
$("#id_desc_activo_marca").hide();
$("#ubicacion").hide();

}


function xUbicacion() {
$("#id_activo_ubica").hide().val("");
$("#id_activo_tipo").hide().val(""); 
$("#id_activo_depar").hide().val("");
$("#id_pestanias_seguros").hide().val("");
$("#id_activo_codigo").hide().val("");
$("#busca_activos").hide().val("");
$("#id_activo_area").hide().val("");
$("#id_poliza_seguros").hide().val("");
$("#id_desc_activo_marca").show();
$("#ubicacion").show();
}

function xTipo() {
$("#id_desc_activo_marca").hide();
$("#busca_marca").hide();
$("#id_activo_tipo").show();
$("#id_activo_grupo").hide().val("");
$("#id_activo_ubica").hide().val("");
$("#id_activo_depar").hide().val("");
$("#id_pestanias_seguros").hide().val("");
$("#id_activo_codigo").hide().val("");
$("#busca_activos").hide().val("");
$("#id_activo_area").hide().val("");
$("#id_poliza_seguros").hide().val("");

}





</script>



<script>
  jQuery(document).ready(function($){
    $('*[data-href]').on('click', function(){
      window.location = $(this).data("href");
    });
  });
  // $("#container").on('click-row.bs.table', function(e, row, $element){
  //   window.location = $(this).data('url');
  // });
</script>


{% endblock %}
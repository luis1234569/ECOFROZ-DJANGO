{% extends 'base.html' %}
{% load bootstrap %}
{% load widget_tweaks %}

{% block content %}
<div class="jumbotron container-fluid" style="margin-top: 25px;">
  <h2 class="display-5" style="margin-top: -25px;">Reportes Filtrados</h2>
    <br>
        <form method="GET" id="form" >
            {% csrf_token %}
            <div class="form-row">
              <div class="form-group col-md-4">
                <label>{{ form3.actividad.label }}</label>
                {{ form3.actividad }} 
              </div>
              <div class="form-group col-md-4">
                <label>{{ form3.categoria_proveedor.label }}</label>
                {{ form3.categoria_proveedor }}
              </div>
              <div class="form-group col-md-4">
                <label>{{ form2.estado.label }}</label>
                {{ form2.estado }}
            </div>
            </div>
           
            <div class="row">
              <div class="col-md-12" style="margin-top: 10px;">
                <button class="btn btn-warning my-2 my-sm-0" type="reset" onclick="location.href='{% url 'proveedores:filtrar_proveedores' %}'">Limpiar</button> 
                <button class="btn btn-primary my-2 my-sm-0" type="submit">Buscar</button>        
              </div>
          </div>
        </form>
</div>

  {% if var %}
  <div class="container-fluid">
    <h3 style="float: left;margin-top:5px; margin-right: 10px;" id="heading">Número de registros encontrados: {{ var }} </h3>
    <button class="btn btn-success" style="margin-top: 5px;" type="button" onclick="location.href='{% url 'activos:to_excelclass' %}'">Exportar a Excel</button>      
    
  </div>
  <br>
  {% endif %}
  <div class="container-fluid">
    <table class="table table-hover table-dark table-sm container-fluid" style="width: 99%;">
                <thead>
                    <tr>
                      <td scope="col"><strong>No</strong></td>
                      <td scope="col"><strong>RUC</strong></td>
                      <td scope="col"><strong>Razón Social</strong></td>
                      <td scope="col"><strong>Dirección</strong></td>
                      <td scope="col"><strong>Categoría</strong></td>
                      <td scope="col"><strong>Representante Legal</strong></td>
                      <td scope="col"><strong>Teléfono Convencional</strong></td>
                      <td scope="col"><strong>Celular</strong></td>
                      <td scope="col"><strong>Calificación</strong></td>
                      <td scope="col"><strong>Estado</strong></td>
                      <td scope="col"><strong>Acciones</strong></td>
                    </tr>
                </thead>
              <tbody>
                {% if form %}
                {% for proveedor in form  %} 
                  <tr data-href="{% url 'proveedores:editar_proveedor'  proveedor.codigo_id.id %}" style="cursor: pointer;"> 
                    <td>{{ forloop.counter }}</td>
                    <td>{{ proveedor.codigo_id.ruc }}</td>
                    <td>{{ proveedor.codigo_id.nombre_empresa }}</td>
                    <td>{{ proveedor.codigo_id.direccion_matriz }}</td> 
                    <td>{{ proveedor.categoria_proveedor }}</td>
                    <td>{{ proveedor.codigo_id.representante_legal }}</td>
                    <td>{{ proveedor.codigo_id.telefono }}</td>
                    <td>{{ proveedor.codigo_id.celular }}</td>
                    <td>{{ proveedor.codigo_id.calificacion }}</td>
                    <td>{{ proveedor.codigo_id.estado }}</td>
                    <td>
                      <a class="btn btn-success glyphicon glyphicon-folder-open" href="{% url 'proveedores:ver_documentos'  proveedor.codigo_id.id %}"></a>
                    </td>
                   
                  </tr>
              
               
              {% endfor %}
              
              {% else %}
              <h1>No hay registros</h1>
              
              {% endif %}
              </tbody>
              
              </table>
              
              <div class="pagination container-fluid" style="width: 98%;">
                <span class="step-links">
                    {% if form.has_previous %}
                        <a href="?page=1">&laquo; inicio</a>
                        <a href="?page={{ form.previous_page_number }}">previo</a>
                    {% endif %}
              
                    <span class="current">
                        Page {{ form.number }} of {{ form.paginator.num_pages }}.
                    </span>
              
                    {% if form.has_next %}
                        <a href="?page={{ form.next_page_number }}">próximo</a>
                        <a href="?page={{ form.paginator.num_pages }}">último &raquo;</a>
                    {% endif %}
                </span>
              </div>
              
              {% endblock content %}
              
              {% block extrajs %}
              <script>
                jQuery(document).ready(function($){
                  $('*[data-href]').on('click', function(){
                    window.location = $(this).data("href");
                  });
                });
              </script>
              {% endblock %}
{% extends 'base.html' %}
{% load widget_tweaks %}

{% block extrahead %}
{% endblock %}

{% block title %}
    <h2>Ordenes de Pedidos</h2>
{% endblock %}

{% block content %}
<div class="jumbotron" style="width: 75%; margin:auto; padding-top: 25px; margin-top: 50px; margin-bottom: 25px;">
<h2 class="display-5">Ingreso de Codificaci√≥n</h2>
<!-- <h4 class="display-6">Hola {{ user.first_name }} {{ user.last_name }}</h4> -->
<form method="POST">
    {% csrf_token %}
    <div class="form-group">
        <input id="usuario_solicita" type="text" name="usuario_solicita" hidden value="{{ user.id }}">
    </div>
    <div class="form-group col-md-6">
        <label>{{ form2.activo_nomenclatura.label }}</label>
        {{ form2.activo_nomenclatura }}
    </div>
    <div class="form-group col-md-6">
        <label>{{ form2.activo_codigo.label }}</label>
        {% render_field form2.activo_codigo value=nomen readonly="True" %}
    </div>
    <div class="form-group col-md-6">
        <label for="{{ form2.activo_grupo.ag }}">{{ form2.activo_grupo.label }}</label>
        {{ form2.activo_grupo }}
    </div>
    <div class="form-group col-md-6">
        <label for="{{ form2.activo_tipo.at }}">{{ form2.activo_tipo.label }}</label>
        <input class="form-group col-md-12" type="text" value="{{ orden.tipoactivo }}" readonly="true">
        {% render_field form2.activo_tipo value=orden.tipoactivo.id %}
    </div>
    <div class="form-group col-md-4">
        <label for="{{ form2.activo_ubica.au }}">{{ form2.activo_ubica.label }}</label>
        {{ form2.activo_ubica }}
    </div> 
    <div class="form-group col-md-4">
        <label for="{{ form2.activo_depar.ad }}">{{ form2.activo_depar.label }}</label>
        <input class="form-group col-md-12" type="text" value="{{ orden.departamento }}" readonly="true">
        {% render_field form2.activo_depar value=orden.departamento.id %}
    </div>
    <div class="form-group col-md-4">
        <label for="{{ form2.activo_area.aa }}">{{ form2.activo_area.label }}</label>
        <input class="form-group col-md-12" type="text" value="{{ orden.area }}" readonly="true">
        {% render_field form2.activo_area value=orden.area.id %}
    </div>
    <div class="form-group col-md-12">
        <label for="{{ form2.numproyecto.numpro }}">{{ form2.numproyecto.label }}</label>
        {{ form2.numproyecto }}
    </div>
    <div class="form-group col-md-12">
        <label for="{{ form2.cod_activo_padre.cap }}">{{ form2.cod_activo_padre.label }}</label>
        {{ form2.cod_activo_padre }}
    </div>

    <div class="col-md-10">
        <label for="{{ form2.activo_descripcion.ad }}">{{ form2.activo_descripcion.label }}</label>
        {{ form2.activo_descripcion }}
    </div>
    <div class="col-md-2">
        <label for="{{ form.desc_activo_usuario_registra.daur }}">{{ form.desc_activo_usuario_registra.label }}</label>
        {% render_field form.desc_activo_usuario_registra value=user.username readonly="True" %}
    </div>

    <div class="row">
        <div class="col-md-12" style="margin-top: 10px;">
            <button type="submit" class="btn btn-primary">Generar</button>
        </div>
    </div> 
</form>
</div>
<!-- <div style="float: right; width: 30%; padding: 0px 0px 0px 10px">
    <h3>Contenido derecho</h3>
</div> -->
{% endblock %}

{% block extrajs %}
<script>
    $("#reemplazo_accion_div").hide().val("");
    // $("#reemplazo_accion_label").hide();
    
    $("#motivo_compra").change(function(){
        var opcion = $(this).val();

        if (opcion == "reemplazo_m" || opcion == "reemplazo_o")
            $("#reemplazo_accion_div").show();
        else
            $("#reemplazo_accion_div").hide().val("");
            // $("#reemplazo_accion_label").hide();
    });

    function ordenarSelect(id_componente)
    {
      var selectToSort = jQuery('#' + id_componente);
      var optionActual = selectToSort.val();
      selectToSort.html(selectToSort.children('option').sort(function (a, b) {
        return a.text === b.text ? 0 : a.text < b.text ? -1 : 1;
      })).val(optionActual);
    }
    $(document).ready(function () {
      ordenarSelect('selectPaises');
    });

    function ordenarSelect(id_componente)
    {
      var selectToSort = jQuery('#' + id_componente);
      var optionActual = selectToSort.val();
      selectToSort.html(selectToSort.children('option').sort(function (a, b) {
        return a.text === b.text ? 0 : a.text < b.text ? -1 : 1;
      })).val(optionActual);
    }
    $(document).ready(function () {
      ordenarSelect('tiempo_tipo');
    });
</script>
{% endblock %}
{% extends "layout/base.html" %}

{% block extrahead %}
<style>
    #titulo {
        font-family: "Trebuchet MS", Arial, Helvetica, sans-serif;
    }

    #tabla-reporte {
        font-family: "Trebuchet MS", Arial, Helvetica, sans-serif;

    }

    #anuladas {
        text-align: center;
        color: #fff;
        background-color: darkgoldenrod;
    }
</style>
{% endblock extrahead %}

{% block content %}
<div class="container" style="margin: 25px auto;">
    <div class="row">
        <div class="col-md-6 search">
            <form class="form-inline my-2 my-lg-0" method="GET">
                <input class="form-control mr-sm-2" type="text" placeholder="N° Pedido, Descripción" name="buscar" {% if busqueda %} value="{{ busqueda }}" {% endif %}>
                <button class="btn btn-secondary my-2 my-sm-0" type="submit">Buscar</button>
                <a class="btn  btn-secondary my-2 my-sm-0" style="margin-left: 10px;"
                    href="{% url 'solicita_puestos:listar_solicita_puesto' %}"></button>Limpiar</a>
            </form>
        </div>
        <div class="col-md-6">
            <a class="btn btn-lg btn-success rounded-circle" style="float: right;"
                href="{% url 'solicita_puestos:crear_solicita_puesto' %}" title="Nuevo Pedido">+</a>
        </div>
    </div>
</div>
<div class="container">
    <h4 id="titulo">Solicitud de ingreso de personal</h4>
</div>

<table class="table table-dark table-small table-striped container-fluid" style="margin: 5px auto" id="tabla-reporte">
    {% if puestosSolicitados %}
    <thead>
        <tr>
            <th scope="col">Pedido N°</th>
            <th scope="col">Departamento</th>
            <th scope="col">Fecha Solicitud</th>
            <th scope="col">Cargo</th>
            <th scope="col">Justificación</th>
            <th scope="col">Estado Aprobación</th>
            <th scope="col">Opciones</th>
        </tr>
    </thead>
    <tbody>
        {% for item in puestosSolicitados %}
        <tr>
            <td>{{ item.id }}</td>
            <td>{{ item.departamento.dep_nombre }}</td>
            <td>{{ item.fecha_solicitud|date:'Y-m-d' }}</td>
            <td>{{ item.cargo }}</td>
            <td>{{ item.justificacion }}</td>
            {% if item.estado_aprobacion == 1 %}
            <td class="text-success">Aprobado</td>
            {% elif item.estado_aprobacion == 0 %}
            <td class="text-warning">No aprobado</td>
            {% elif item.estado_aprobacion == 2 %}
            <td class="text-danger"style="color:rgb(230, 168, 11)"><b>Anulada</b></td>
            {% else %}
            <td>Pendiente</td>
            {% endif %}
            <td>
                {% if item.estado_aprobacion != 2 and item.estado_aprobacion != 1 %}
                <a href="{% url 'solicita_puestos:editar_solicita_puesto' item.id %}"
                    class="btn btn-primary glyphicon glyphicon-edit" title="Editar"></a>
                <a href="{% url 'solicita_puestos:eliminar_solicita_puesto' item.id %}"
                    class="btn btn-danger glyphicon glyphicon-remove" title="Eliminar"></a>
                {% else %}
                <a href="#" class="btn btn-secondary glyphicon glyphicon-edit" title="Editar"></a>
                <a href="#" class="btn btn-secondary glyphicon glyphicon-remove" title="Eliminar"></a>
                {% endif %}
            </td>
        </tr>
        {% endfor %}
    </tbody>
    {% else %}
    <div class="alert-danger" role="alert">
        <h3 style="text-align: center;">No Hay Solicitudes Para Aprobar</h3>
    </div>
    {% endif %}

</table>
  <div class="container">
    <nav aria-label="Page navigation">
        <ul class="pagination justify-content-center">
            {% if puestosSolicitados.has_previous %}
                <li class="page-item">
                    <a class="page-link" href="?page=1" aria-label="Inicio">
                        <span aria-hidden="true">&laquo;&laquo;</span>
                    </a>
                </li>
                <li class="page-item">
                    <a class="page-link" href="?page={{ puestosSolicitados.previous_page_number }}" aria-label="Anterior">
                        <span aria-hidden="true">&laquo;</span>
                    </a>
                </li>
            {% else %}
                <li class="page-item disabled">
                    <span class="page-link">&laquo;&laquo;</span>
                </li>
                <li class="page-item disabled">
                    <span class="page-link">&laquo;</span>
                </li>
            {% endif %}

            <li class="page-item disabled">
                <span class="page-link">Página {{ puestosSolicitados.number }} de {{ puestosSolicitados.paginator.num_pages }}</span>
            </li>

            {% if puestosSolicitados.has_next %}
                <li class="page-item">
                    <a class="page-link" href="?page={{ puestosSolicitados.next_page_number }}" aria-label="Siguiente">
                        <span aria-hidden="true">&raquo;</span>
                    </a>
                </li>
                <li class="page-item">
                    <a class="page-link" href="?page={{ puestosSolicitados.paginator.num_pages }}" aria-label="Final">
                        <span aria-hidden="true">&raquo;&raquo;</span>
                    </a>
                </li>
            {% else %}
                <li class="page-item disabled">
                    <span class="page-link">&raquo;</span>
                </li>
                <li class="page-item disabled">
                    <span class="page-link">&raquo;&raquo;</span>
                </li>
            {% endif %}
        </ul>
    </nav>
  </div>

{% endblock content %}